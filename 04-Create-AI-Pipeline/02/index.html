
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Build custom AI-powered solutions on top of Azure Database for PostgreSQL and Azure AI.">
      
      
        <meta name="author" content="Solliance">
      
      
        <link rel="canonical" href="https://solliancenet.github.io/microsoft-postgresql-solution-accelerator-build-your-own-ai-copilot/04-Create-AI-Pipeline/02/">
      
      
        <link rel="prev" href="../01/">
      
      
        <link rel="next" href="../03/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>4.2 Configure Semantic Chunking - Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#42-configure-semantic-chunking" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide" class="md-header__button md-logo" aria-label="Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide" data-md-component="logo">
      
  <img src="../../img/postgresql.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4.2 Configure Semantic Chunking
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="cyan"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/solliancenet/microsoft-postgresql-solution-accelerator-build-your-own-ai-copilot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    solliancenet/microsoft-postgresql-solution-accelerator-build-your-own-ai-copilot
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Before You Begin

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../01-Introduction/" class="md-tabs__link">
          
  
    
  
  01 Introduction

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../02-Setup/" class="md-tabs__link">
          
  
    
  
  02 Setup

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../03-Integrate-AI-Into-PostgreSQL/" class="md-tabs__link">
          
  
    
  
  03 Integrate AI Into PostgreSQL

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  04 Create AI Pipeline

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../05-Build-Copilot/" class="md-tabs__link">
          
  
    
  
  05 Build Copilot

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../06-Improve-RAG-Accuracy/" class="md-tabs__link">
          
  
    
  
  06 Improve RAG Accuracy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../07-Redeploy/" class="md-tabs__link">
          
  
    
  
  07 Redeploy

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../Tear-Down/" class="md-tabs__link">
          
  
    
  
  Tear Down

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide" class="md-nav__button md-logo" aria-label="Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide" data-md-component="logo">
      
  <img src="../../img/postgresql.svg" alt="logo">

    </a>
    Build your own AI Copilot for FSI with PostgreSQL: Workshop Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/solliancenet/microsoft-postgresql-solution-accelerator-build-your-own-ai-copilot" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    solliancenet/microsoft-postgresql-solution-accelerator-build-your-own-ai-copilot
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Before You Begin
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../01-Introduction/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    01 Introduction
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            01 Introduction
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-Introduction/01-App-Scenario/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.1 The App Scenario
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-Introduction/02-App-Architecture/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.2 Application Architecture
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../01-Introduction/03-Data-Structure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1.3 Understanding the Table Schema and Artifacts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../02-Setup/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    02 Setup
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            02 Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_2" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../02-Setup/0-PreRequisites/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    0 PreRequisites
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            0 PreRequisites
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../02-Setup/1-Provision-And-Setup/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1 Provision And Setup
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            1 Provision And Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/00-Install-Software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install Software
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/01-Fork-Repo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Fork Repo
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/02-Verify-Azure-Quota/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Verify Azure Quota
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/03-Self-Guided/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    A. Self-Guided Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/04-Instructor-Led/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    B. Instructor-Led Workshop Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/05-Setup-Dev-Env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup Dev Environment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../02-Setup/1-Provision-And-Setup/06-Validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validate Your Setup
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../02-Setup/2-Review-Manual-Process/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    2 Review Manual Process
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            2 Review Manual Process
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../03-Integrate-AI-Into-PostgreSQL/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    03 Integrate AI Into PostgreSQL
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            03 Integrate AI Into PostgreSQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-Integrate-AI-Into-PostgreSQL/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 Install extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-Integrate-AI-Into-PostgreSQL/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 Configure the Azure AI extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-Integrate-AI-Into-PostgreSQL/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3 Enable vector storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-Integrate-AI-Into-PostgreSQL/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4 Optimize Vector Query Performance
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../03-Integrate-AI-Into-PostgreSQL/05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5 Vectorize data
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    04 Create AI Pipeline
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            04 Create AI Pipeline
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1 Extract Data with Document Intelligence
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    4.2 Configure Semantic Chunking
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    4.2 Configure Semantic Chunking
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-chunks-in-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      What Are Chunks in Document Intelligence?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Are Chunks in Document Intelligence?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-chunks-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Chunks Work
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-chunks-matter-in-ai-powered-data-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Why Chunks Matter in AI-Powered Data Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-the-chunking-strategy-in-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Defining the Chunking Strategy in Document Intelligence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Defining the Chunking Strategy in Document Intelligence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chunking-strategy-for-statements-of-work-sows" class="md-nav__link">
    <span class="md-ellipsis">
      Chunking Strategy for Statements of Work (SOWs)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunking-strategy-for-invoices" class="md-nav__link">
    <span class="md-ellipsis">
      Chunking Strategy for Invoices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-in-chunking-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Differences in Chunking Strategy:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-an-optimized-chunking-strategy-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Why an Optimized Chunking Strategy Matters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leverage-azure-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Leverage Azure Document Intelligence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Leverage Azure Document Intelligence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-chunks-in-azure-database-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Store Chunks in Azure Database for PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-semantic-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Semantic Chunking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-chunks-to-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Write Chunks to PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Write Chunks to PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intelligent-data-storage-in-azure-database-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Intelligent Data Storage in Azure Database for PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-generating-vector-embeddings-with-azure-ai-extension" class="md-nav__link">
    <span class="md-ellipsis">
      4. Generating Vector Embeddings with Azure AI Extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-endpoints-to-insert-chunks-on-insert" class="md-nav__link">
    <span class="md-ellipsis">
      API Endpoints To Insert Chunks on Insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3 Summarize documents
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4 Validate Data with Azure OpenAI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.5 Review Validation Prompts
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_6" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../05-Build-Copilot/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    05 Build Copilot
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            05 Build Copilot
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1 Explore the API Codebase
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.2 Review RAG Design
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.3 Leverage LangChain Orchestration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.4 Enable the Chat Endpoint
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.5 Test the Chat API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.6 Add Copilot Chat To UI
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.7 Test the UI Copilot Chat
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../05-Build-Copilot/08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.8 Refine the Copilot Prompt
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../06-Improve-RAG-Accuracy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    06 Improve RAG Accuracy
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            06 Improve RAG Accuracy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/01/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1 Understand Semantic Ranking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/02/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2 Use Semantic Ranking in PostgreSQL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/03/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.3 Update Copilot With Semantic Ranking
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/04/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.4 Review GraphRAG
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/05/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.5 Enable AGE
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/06/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.6 Export Graph Data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/07/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.7 Create Graph Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../06-Improve-RAG-Accuracy/08/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.8 Update Copilot With GraphRAG
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../07-Redeploy/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    07 Redeploy
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            07 Redeploy
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../Tear-Down/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Tear Down
  </span>
  

            </a>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Tear Down
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-are-chunks-in-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      What Are Chunks in Document Intelligence?
    </span>
  </a>
  
    <nav class="md-nav" aria-label="What Are Chunks in Document Intelligence?">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-chunks-work" class="md-nav__link">
    <span class="md-ellipsis">
      How Chunks Work
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-chunks-matter-in-ai-powered-data-validation" class="md-nav__link">
    <span class="md-ellipsis">
      Why Chunks Matter in AI-Powered Data Validation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#defining-the-chunking-strategy-in-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Defining the Chunking Strategy in Document Intelligence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Defining the Chunking Strategy in Document Intelligence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#chunking-strategy-for-statements-of-work-sows" class="md-nav__link">
    <span class="md-ellipsis">
      Chunking Strategy for Statements of Work (SOWs)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#chunking-strategy-for-invoices" class="md-nav__link">
    <span class="md-ellipsis">
      Chunking Strategy for Invoices
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#differences-in-chunking-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Differences in Chunking Strategy:
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#why-an-optimized-chunking-strategy-matters" class="md-nav__link">
    <span class="md-ellipsis">
      Why an Optimized Chunking Strategy Matters
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#leverage-azure-document-intelligence" class="md-nav__link">
    <span class="md-ellipsis">
      Leverage Azure Document Intelligence
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Leverage Azure Document Intelligence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#store-chunks-in-azure-database-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Store Chunks in Azure Database for PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#benefits-of-semantic-chunking" class="md-nav__link">
    <span class="md-ellipsis">
      Benefits of Semantic Chunking
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#write-chunks-to-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Write Chunks to PostgreSQL
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Write Chunks to PostgreSQL">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#intelligent-data-storage-in-azure-database-for-postgresql" class="md-nav__link">
    <span class="md-ellipsis">
      Intelligent Data Storage in Azure Database for PostgreSQL
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-generating-vector-embeddings-with-azure-ai-extension" class="md-nav__link">
    <span class="md-ellipsis">
      4. Generating Vector Embeddings with Azure AI Extension
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#api-endpoints-to-insert-chunks-on-insert" class="md-nav__link">
    <span class="md-ellipsis">
      API Endpoints To Insert Chunks on Insert
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#references" class="md-nav__link">
    <span class="md-ellipsis">
      References
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="42-configure-semantic-chunking">4.2 Configure Semantic Chunking<a class="headerlink" href="#42-configure-semantic-chunking" title="Permanent link">&para;</a></h1>
<p>Semantic chunking is a critical step in preparing documents for retrieval-augmented generation (RAG) and other AI-driven workflows. It involves breaking down large documents into smaller, semantically meaningful chunks that enable better indexing, searching, and retrieval. Using Azure Document Intelligence, semantic chunking can be configured to optimize data flow for downstream processes. Below is a guide to configuring semantic chunking effectively.</p>
<h2 id="what-are-chunks-in-document-intelligence">What Are Chunks in Document Intelligence?<a class="headerlink" href="#what-are-chunks-in-document-intelligence" title="Permanent link">&para;</a></h2>
<p>In <strong>Azure AI Document Intelligence</strong>, "<em>chunks</em>" refer to structured segments of a document that are intelligently divided to improve data extraction, retrieval, and validation. This process, known as <strong>Semantic Chunking</strong>, ensures that information is logically grouped based on its meaning and context, rather than arbitrary divisions like page numbers.</p>
<h3 id="how-chunks-work">How Chunks Work<a class="headerlink" href="#how-chunks-work" title="Permanent link">&para;</a></h3>
<ol>
<li>
<p><strong>Semantic Understanding:</strong> Instead of treating a document as a single block of text, AI models recognize key sections such as headings, paragraphs, tables, and lists.</p>
</li>
<li>
<p><strong>Context Preservation:</strong> By maintaining the relationship between different parts of the document, chunking helps AI models interpret financial statements, SOWs, and invoices more accurately.</p>
</li>
<li>
<p><strong>Retrieval-Augmented Generation (RAG)</strong> models can retrieve relevant chunks dynamically, improving AI-driven document validation, compliance checks, and financial data reconciliation.</p>
</li>
</ol>
<h3 id="why-chunks-matter-in-ai-powered-data-validation">Why Chunks Matter in AI-Powered Data Validation<a class="headerlink" href="#why-chunks-matter-in-ai-powered-data-validation" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Higher Accuracy:</strong> Structured document segmentation improves AIs ability to <strong>extract and validate key financial data</strong>.  </li>
<li><strong>Better Contextual Retrieval:</strong> When comparing invoices to <strong>Statements of Work (SOWs)</strong>, AI can <strong>retrieve specific clauses</strong> related to payment terms.  </li>
<li><strong>Optimized Query Performance:</strong> AI-powered searches return <strong>more precise</strong> and <strong>context-aware</strong> results.  </li>
</ul>
<hr />
<h2 id="defining-the-chunking-strategy-in-document-intelligence">Defining the Chunking Strategy in Document Intelligence<a class="headerlink" href="#defining-the-chunking-strategy-in-document-intelligence" title="Permanent link">&para;</a></h2>
<p>When working with Statements of Work (SOWs) and Invoices, defining an effective chunking strategy is essential to ensure accurate data extraction, validation, and cross-referencing. The way chunks are structured depends on the document type, as <strong>SOWs</strong> and <strong>Invoices</strong> have different formats, purposes, and data requirements.</p>
<h3 id="chunking-strategy-for-statements-of-work-sows">Chunking Strategy for Statements of Work (SOWs)<a class="headerlink" href="#chunking-strategy-for-statements-of-work-sows" title="Permanent link">&para;</a></h3>
<p>SOWs are <strong>long, structured documents</strong> that outline contractual obligations, payment milestones, deliverables, and compliance clauses. The chunking strategy for SOWs must focus on <strong>preserving contextual integrity</strong> while making it easy to retrieve relevant sections.</p>
<h4 id="key-chunking-considerations-for-sows">Key Chunking Considerations for SOWs:<a class="headerlink" href="#key-chunking-considerations-for-sows" title="Permanent link">&para;</a></h4>
<ol>
<li>
<p><strong>Logical Sectioning:</strong>  </p>
<ol>
<li>Chunk based on headings, subheadings, and numbered clauses (e.g., <strong>"Scope of Work"</strong>, <strong>"Payment Terms"</strong>, <strong>"Milestones"</strong>).  </li>
<li>Ensures that AI can retrieve relevant contract details when cross-referencing invoices.  </li>
</ol>
</li>
<li>
<p><strong>Paragraph-Based Semantic Chunking:</strong>  </p>
<ol>
<li>Break sections into <strong>semantically meaningful paragraphs</strong> for precise retrieval.  </li>
<li>Helps ensure <strong>RAG-based AI models</strong> understand contract obligations.</li>
</ol>
</li>
<li>
<p><strong>Compliance Clause Recognition:</strong></p>
<ol>
<li>Identify and separately chunk regulatory or compliance language to facilitate <strong>automated legal checks</strong>.</li>
</ol>
</li>
<li>
<p><strong>Deliverable Based Segmentation:</strong>  </p>
<ol>
<li>Define chunks based on <strong>payment deliverables</strong>, linking them to expected invoice amounts.  </li>
</ol>
</li>
</ol>
<h3 id="chunking-strategy-for-invoices">Chunking Strategy for Invoices<a class="headerlink" href="#chunking-strategy-for-invoices" title="Permanent link">&para;</a></h3>
<p>Invoices are <strong>structured, tabular documents</strong> designed to list billable items, amounts, and due dates. Unlike SOWs, invoice chunking must focus on tabular data extraction, line-item accuracy, and direct matching with SOWs.</p>
<h4 id="key-chunking-considerations-for-invoices">Key Chunking Considerations for Invoices:<a class="headerlink" href="#key-chunking-considerations-for-invoices" title="Permanent link">&para;</a></h4>
<ol>
<li><strong>Line-Item Chunking:</strong>  <ol>
<li>Each <strong>line item (e.g., service, quantity, amount, tax, etc.)</strong> is treated as a separate chunk for precise AI validation.  </li>
</ol>
</li>
<li>
<p><strong>Table-Aware Chunking:</strong>  </p>
<ol>
<li>Preserve <strong>tabular structures</strong> to ensure AI correctly extracts and processes invoice totals, taxes, and discounts.</li>
</ol>
</li>
<li>
<p><strong>Semantic Chunking for Descriptions:</strong>  </p>
<ol>
<li>Invoice descriptions may <strong>reference project deliverables</strong>chunking ensures AI can <strong>cross-validate them against SOW deliverables</strong>.  </li>
</ol>
</li>
<li>
<p><strong>Vendor &amp; Payment Terms Segmentation:</strong>  </p>
<ol>
<li>Vendor details, invoice dates, and due dates must be separately chunked to ensure <strong>accurate payment milestone validation</strong>.  </li>
</ol>
</li>
</ol>
<h3 id="differences-in-chunking-strategy">Differences in Chunking Strategy:<a class="headerlink" href="#differences-in-chunking-strategy" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>SOW Chunking Strategy</th>
<th>Invoice Chunking Strategy</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Document Structure</strong></td>
<td>Long-form contract with sections</td>
<td>Structured tables with line items</td>
</tr>
<tr>
<td><strong>Chunking Method</strong></td>
<td>Section &amp; paragraph-based chunking</td>
<td>Table-aware &amp; line-item chunking</td>
</tr>
<tr>
<td><strong>Key Chunking Focus</strong></td>
<td>Milestones, deliverables, compliance clauses</td>
<td>Billable items,  payment details</td>
</tr>
<tr>
<td><strong>AI Retrieval Purpose</strong></td>
<td>Validate contractual obligations &amp; compliance</td>
<td>Match billable amounts &amp; due dates with SOWs</td>
</tr>
</tbody>
</table>
<h3 id="why-an-optimized-chunking-strategy-matters">Why an Optimized Chunking Strategy Matters<a class="headerlink" href="#why-an-optimized-chunking-strategy-matters" title="Permanent link">&para;</a></h3>
<p><strong>Improves AI Accuracy</strong>  Ensures that document validation is based on structured, meaningful chunks.<br />
<strong>Enhances Cross-Document Validation</strong>  Allows AI models to <strong>match invoices to SOWs efficiently</strong>.<br />
<strong>Supports Compliance &amp; Auditability</strong>  Ensures that all necessary sections are <strong>properly reviewed</strong>.<br />
<strong>Optimizes Retrieval-Augmented Generation (RAG) Queries</strong>  AI can retrieve <strong>precise contract and invoice details</strong> for analysis.  </p>
<hr />
<h2 id="leverage-azure-document-intelligence">Leverage Azure Document Intelligence<a class="headerlink" href="#leverage-azure-document-intelligence" title="Permanent link">&para;</a></h2>
<p>Azure Document Intelligence provides tools and capabilities to automate the chunking process:</p>
<ol>
<li><strong>Use Pre-Trained Models</strong>:</li>
<li>
<p>Apply pre-trained models to extract structured data and identify logical sections within documents. In this workshop 2 models were used:</p>
<ol>
<li>The <strong>prebuilt-invoice</strong> model in Document Intelligence was used to process invoices as this model is designed to extract key information from invoices, such as vendor details, invoice date, and total amount due. This model leverages advanced machine learning techniques to streamline the processing of invoices, reducing manual data entry and improving accuracy.</li>
<li>The <strong>prebuilt-document</strong> model in Document Intelligence was used to process Statement of Works as this model is designed to extract structured data from a variety of document types, such as contracts, receipts, and forms. This model uses machine learning to identify and extract relevant information, enabling efficient document processing and data management.</li>
</ol>
</li>
<li>
<p><strong>Apply Custom Models</strong>:</p>
<ol>
<li>If the pre-built models will not work for your domain-specific documents then you can use custom models trained on your documents to identify sections unique to your use case.
   <a href="https://learn.microsoft.com/azure/ai-services/document-intelligence/how-to-guides/build-a-custom-model?view=doc-intel-4.0.0">Follow this guide</a></li>
</ol>
</li>
<li>
<p><strong>Configure Semantic Rules</strong>:</p>
<ol>
<li>Define rules or conditions to segment documents based on semantic content.</li>
<li>Example: Break a contract into "Parties Involved," "Obligations," and "Terms and Conditions" sections.</li>
</ol>
</li>
</ol>
<hr />
<h3 id="store-chunks-in-azure-database-for-postgresql">Store Chunks in Azure Database for PostgreSQL<a class="headerlink" href="#store-chunks-in-azure-database-for-postgresql" title="Permanent link">&para;</a></h3>
<p>Once documents are semantically chunked, the resulting chunks are stored in <strong>Azure Database for PostgreSQL</strong> for efficient querying and retrieval:</p>
<ol>
<li>
<p><strong>Data Structure</strong>:</p>
<ol>
<li>Each chunk is stored as an individual record with metadata for easy identification.</li>
<li>
<p>Example Schema:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SQL</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span>
<span class="normal">8</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">sow_chunks</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="n">BIGSERIAL</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="p">,</span>
<span class="w">    </span><span class="n">sow_id</span><span class="w"> </span><span class="nb">BIGINT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span>
<span class="w">    </span><span class="n">heading</span><span class="p">,</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="n">content</span><span class="w"> </span><span class="nb">TEXT</span><span class="p">,</span>
<span class="w">    </span><span class="n">page_number</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">sow_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">sows</span><span class="w"> </span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DELETE</span><span class="w"> </span><span class="k">CASCADE</span>
<span class="p">);</span>
</code></pre></div></td></tr></table></div>
</li>
</ol>
</li>
<li>
<p><strong>Metadata</strong>:</p>
<ol>
<li>This can include metadata such as document ID, chunk sequence, and semantic labels for efficient retrieval.</li>
</ol>
</li>
</ol>
<hr />
<h3 id="benefits-of-semantic-chunking">Benefits of Semantic Chunking<a class="headerlink" href="#benefits-of-semantic-chunking" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Enhanced Retrieval</strong>:</li>
<li>
<p>Enables precise querying of specific document sections, improving the accuracy of AI-driven responses.</p>
</li>
<li>
<p><strong>Optimized Indexing</strong>:</p>
<ol>
<li>Reduces the complexity of indexing large documents by focusing on smaller, meaningful sections.</li>
</ol>
</li>
<li>
<p><strong>Improved AI Performance</strong>:</p>
<ol>
<li>Ensures AI models operate within token limits, avoiding truncation and enhancing output quality.</li>
</ol>
</li>
</ol>
<hr />
<h2 id="write-chunks-to-postgresql">Write Chunks to PostgreSQL<a class="headerlink" href="#write-chunks-to-postgresql" title="Permanent link">&para;</a></h2>
<h3 id="intelligent-data-storage-in-azure-database-for-postgresql">Intelligent Data Storage in Azure Database for PostgreSQL<a class="headerlink" href="#intelligent-data-storage-in-azure-database-for-postgresql" title="Permanent link">&para;</a></h3>
<p>Chunked text data is stored in <strong>Azure Database for PostgreSQL</strong>, ensuring efficient storage and retrieval.</p>
<ul>
<li><strong>Data Organization</strong>: Documents are stored in structured formats with metadata.</li>
<li><strong>Scalability</strong>: Optimized for handling large data volumes.</li>
</ul>
<hr />
<h3 id="4-generating-vector-embeddings-with-azure-ai-extension">4. Generating Vector Embeddings with Azure AI Extension<a class="headerlink" href="#4-generating-vector-embeddings-with-azure-ai-extension" title="Permanent link">&para;</a></h3>
<p>The <strong>Azure AI extension</strong> for PostgreSQL enables advanced AI functionalities such as semantic search.</p>
<ul>
<li><strong>Embedding Storage</strong>: Adds vector columns for document embeddings.</li>
<li><strong>Embedding Generation</strong>: Uses <strong>Azure OpenAI</strong> to generate high-dimensional vector embeddings.</li>
</ul>
<p>Example SQL command:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">SQL</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">invoices</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">embeddings</span><span class="w"> </span><span class="n">VECTOR</span><span class="p">(</span><span class="mi">1536</span><span class="p">);</span>
<span class="k">ALTER</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">sows</span><span class="w"> </span><span class="k">ADD</span><span class="w"> </span><span class="k">COLUMN</span><span class="w"> </span><span class="n">embeddings</span><span class="w"> </span><span class="n">VECTOR</span><span class="p">(</span><span class="mi">1536</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<hr />
<h3 id="api-endpoints-to-insert-chunks-on-insert">API Endpoints To Insert Chunks on Insert<a class="headerlink" href="#api-endpoints-to-insert-chunks-on-insert" title="Permanent link">&para;</a></h3>
<p>When uploading a SOW in the application, the document workflow starts with the analysis API endpoint <code>/sows/</code>. This endpoint is called using an HTTP POST passing it the <code>vendor_id</code> of the Vendor and the document file being uploaded.</p>
<p>The document is passed to Document Intelligence to extract the text from the document.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/api/app/routers/sows.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">89</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="n">analysis_result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">doc_intelligence_service</span><span class="o">.</span><span class="n">extract_text_from_sow_document</span><span class="p">(</span><span class="n">document_data</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The application implements a service for calling Document Intelligence located within the <code>src/api/app/services/azure_doc_intelligence_service.py</code> file where the <code>.extract_text_from_sow_document</code> method is located. This code uses the <code>prebuild-document</code> model within Document Intelligence to extract the text from the document.</p>
<p>You can expand the section below to see the specific section of code that calls Document Intelligence to extract the text form the document and generate the text chunks.</p>
<details class="info" open="open">
<summary>Call Document Intelligence to extract text from document</summary>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/api/services/azure_doc_intelligence_service.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">35</span>
<span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span></pre></div></td><td class="code"><div><pre><span></span><code>  <span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">extract_text_from_sow_document</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">document_data</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Extract text and structure using Azure AI Document Intelligence.&quot;&quot;&quot;</span>
    <span class="n">docClient</span> <span class="o">=</span> <span class="n">DocumentAnalysisClient</span><span class="p">(</span>
        <span class="n">endpoint</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">docIntelligenceEndpoint</span><span class="p">,</span>
        <span class="n">credential</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">credential</span>
    <span class="p">)</span>

    <span class="n">poller</span> <span class="o">=</span> <span class="k">await</span> <span class="n">docClient</span><span class="o">.</span><span class="n">begin_analyze_document</span><span class="p">(</span>
        <span class="n">model_id</span><span class="o">=</span><span class="s2">&quot;prebuilt-document&quot;</span><span class="p">,</span>
        <span class="n">document</span><span class="o">=</span><span class="n">document_data</span>
    <span class="p">)</span>

    <span class="n">result</span> <span class="o">=</span> <span class="k">await</span> <span class="n">poller</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="n">analysis</span> <span class="o">=</span> <span class="n">DocumentAnalysisResult</span><span class="p">()</span>
    <span class="n">analysis</span><span class="o">.</span><span class="n">extracted_text</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">analysis</span><span class="o">.</span><span class="n">text_chunks</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">known_headings</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;Project Scope&quot;</span><span class="p">,</span> <span class="s2">&quot;Project Objectives&quot;</span><span class="p">,</span> <span class="s2">&quot;Location&quot;</span><span class="p">,</span> <span class="s2">&quot;Tasks&quot;</span><span class="p">,</span> <span class="s2">&quot;Schedules&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Standards and Testing&quot;</span><span class="p">,</span> <span class="s2">&quot;Payments&quot;</span><span class="p">,</span> <span class="s2">&quot;Compliance&quot;</span><span class="p">,</span> <span class="s2">&quot;Requirements&quot;</span><span class="p">,</span> <span class="s2">&quot;Project Deliverables&quot;</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">page</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">pages</span><span class="p">:</span>
        <span class="n">page_text</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">line</span><span class="o">.</span><span class="n">content</span> <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">lines</span><span class="p">])</span>
        <span class="n">analysis</span><span class="o">.</span><span class="n">extracted_text</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">page_text</span><span class="p">)</span>

        <span class="n">current_heading</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">page</span><span class="o">.</span><span class="n">lines</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">content</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">__is_heading</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">known_headings</span><span class="p">):</span> <span class="c1"># Detect headings</span>
                <span class="n">current_heading</span> <span class="o">=</span> <span class="n">text</span>
                <span class="n">newTextChunk</span> <span class="o">=</span> <span class="n">TextChunk</span><span class="p">()</span>
                <span class="n">newTextChunk</span><span class="o">.</span><span class="n">heading</span> <span class="o">=</span> <span class="n">text</span>
                <span class="n">newTextChunk</span><span class="o">.</span><span class="n">content</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="n">newTextChunk</span><span class="o">.</span><span class="n">page_number</span> <span class="o">=</span> <span class="n">page</span><span class="o">.</span><span class="n">page_number</span>
                <span class="n">analysis</span><span class="o">.</span><span class="n">text_chunks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newTextChunk</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">current_heading</span><span class="p">:</span>
                <span class="n">analysis</span><span class="o">.</span><span class="n">text_chunks</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">content</span> <span class="o">+=</span> <span class="s2">&quot; &quot;</span> <span class="o">+</span> <span class="n">text</span>

    <span class="k">await</span> <span class="n">docClient</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">analysis</span><span class="o">.</span><span class="n">full_text</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">analysis</span><span class="o">.</span><span class="n">extracted_text</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">analysis</span>
</code></pre></div></td></tr></table></div>
</details>
<p>The <code>.extract_text_from_sow_document</code> method returns an object that contains a <code>.text_chunks</code> collection of objects that contain all the text chunks from the document. The code then loops through the chunks that were extracted and inserts them into the database.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">src/api/app/routers/sows.py</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">analysis_result</span><span class="o">.</span><span class="n">text_chunks</span><span class="p">:</span>
    <span class="k">await</span> <span class="n">conn</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        INSERT INTO sow_chunks (sow_id, heading, content, page_number) VALUES ($1, $2, $3, $4);</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span> <span class="n">sow</span><span class="o">.</span><span class="n">id</span><span class="p">,</span> <span class="n">chunk</span><span class="o">.</span><span class="n">heading</span><span class="p">,</span> <span class="n">chunk</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="n">chunk</span><span class="o">.</span><span class="n">page_number</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<p>The text chunks loaded into the database will now be available for query later by the Copilot to implement retrieval augmented generation (RAG) based on the text content of the documents.</p>
<h3 id="references">References<a class="headerlink" href="#references" title="Permanent link">&para;</a></h3>
<p><a href="https://learn.microsoft.com/azure/ai-services/document-intelligence/model-overview?view=doc-intel-4.0.0">Document Intelligence - Document Processing Models</a></p>
<p><a href="https://learn.microsoft.com/azure/ai-services/document-intelligence/how-to-guides/build-a-custom-model?view=doc-intel-4.0.0">Build a Custom Model in Document Intelligence</a></p>
<p><a href="https://learn.microsoft.com/azure/ai-services/document-intelligence/concept/retrieval-augmented-generation?view=doc-intel-4.0.0">Document Intelligence - Retrieval Augmented Generation</a></p>
<div class="admonition success">
<p class="admonition-title">CONGRATULATIONS. You just learned the key concepts of configuring <strong>Semantic Chunking</strong></p>
</div>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../01/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 4.1 Extract Data with Document Intelligence">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                4.1 Extract Data with Document Intelligence
              </div>
            </div>
          </a>
        
        
          
          <a href="../03/" class="md-footer__link md-footer__link--next" aria-label="Next: 4.3 Summarize documents">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                4.3 Summarize documents
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2025 - present Microsoft

    </div>
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.expand", "navigation.instant.progress", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.path", "navigation.indexes", "navigation.top", "toc.follow", "navigation.footer", "content.code.copy", "content.tabs.link"], "search": "../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
  <!-- Add scripts that need to run before here -->
  
      <script src="../../assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  <!-- Add scripts that need to run afterwards here -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    

  </body>
</html>